<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="UTF-8">
 <title>MAPBOX</title>
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

</head>
<body>


<button id="where-am-i">Where am I?</button>  

<button id="where-was-i">Where was I?</button>  

<button id="clear-tracks">Clear</button>  

<img src="" id="map">

<script type="text/javascript">
	
  	var button = document.getElementById('where-am-i');
  	button.addEventListener('click', getLocation);

  	function getLocation () {
	 	$.ajax({
			url: 'http://api.tiles.mapbox.com/v4/geocode/mapbox.places/200+queen+street.json?proximity=-66.1,45.3&access_token=pk.eyJ1IjoianVsZXNjIiwiYSI6ImJlZmZiNWZmYzY1MjUwMTI2ZjcwM2ViZmIyNDllZDQ3In0.2TPqrZKkgtLU53i0ZYzIew',
			data:'',
			success: getPosition,
			error: function() {
				console.log('error!')
				},
			dataType: 'json'	
		});
  	}

	function getPosition(response) {
		var lat = response.features[0].center[0];
		var lon = response.features[0].center[1];
		displayMap(lat,lon);

	}

	function displayMap(lat, lon) {
		var url = "http://api.tiles.mapbox.com/v4/examples.map-zr0njcqy/" + lat + "," + lon + ",13/500x300.png?access_token=pk.eyJ1IjoianVsZXNjIiwiYSI6ImJlZmZiNWZmYzY1MjUwMTI2ZjcwM2ViZmIyNDllZDQ3In0.2TPqrZKkgtLU53i0ZYzIew";
		storeMystuff();
	}

	function storeMystuff () {
		var objStr = JSON.stringify(url);
		window.localStorage.setItem("coordinates", objStr);
		console.log();
	}




</script>

</body>
</html>
